<!DOCTYPE html>
<html>
    <head>
        <title>Real-Time Notifications</title>
        <script>
            const webSocket = new WebSocket("ws://localhost:8080/?jwt=eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjNmM2IxN2M2LTRkNTUtNDU0OC05M2U5LTU3ODY5MzlhYWYyMyIsImlhdCI6MTcyMDcwOTMwNywiZXhwIjoxNzUyMjQ1MzA3fQ.evtbKoTmac7NNA-Ado5oYKPG-q9bySYKgHfetNBBTkE");

            webSocket.onmessage = function (event) {
                const data = JSON.parse(event.data);
                if (data.type === "notification") {
                    document.getElementById("serverMessages").appendChild(document.createTextNode(data.payload.message));
                    document.getElementById("serverMessages").appendChild(document.createElement("br"));
                }
            }

            webSocket.onopen = () => {
                const urlParams = new URLSearchParams(window.location.search);
                const roomId = urlParams.get('roomId');
                webSocket.send(JSON.stringify({
                    type: 'join',
                    payload: {
                        roomId: roomId
                    }
                }));
            }

        </script>
    </head>
    <body>
        <h2>
            Notifications from server
        </h2>
        <div id="serverMessages">

        </div>
    </body>
</html>
